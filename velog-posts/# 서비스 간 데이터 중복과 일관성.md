<p>MSA(Microservices Architecture)에서는 각 서비스가 <strong>자기 DB를 갖는 것이 원칙</strong>입니다.</p>
<ul>
<li>이유: 서비스 간 결합도를 낮추고, 독립적으로 배포/확장 가능</li>
<li>문제: 서로 다른 서비스에서 같은 데이터를 필요로 할 때, <strong>데이터 중복(복제)</strong>이 발생</li>
</ul>
<hr />
<h2 id="1-예시-온라인-쇼핑몰">1. 예시: 온라인 쇼핑몰</h2>
<ul>
<li><strong>OrderService</strong>: 주문 정보 저장</li>
<li><strong>InventoryService</strong>: 재고 관리</li>
<li><strong>NotificationService</strong>: 사용자에게 주문 알림 발송</li>
</ul>
<h3 id="상황">상황</h3>
<ul>
<li>주문을 만들면 OrderService에 저장됨</li>
<li>InventoryService에서 재고를 확인하고 차감해야 함 → 주문 정보를 읽어야 함</li>
<li>NotificationService에서 주문 내역을 사용자에게 보여주기 위해 주문 데이터를 필요로 함</li>
</ul>
<p>→ 각 서비스에서 <strong>주문 데이터를 따로 갖고 싶음</strong> → 데이터 복제 발생</p>
<hr />
<h2 id="2-데이터-복제비정규화-장점">2. 데이터 복제(비정규화) 장점</h2>
<ol>
<li><p><strong>독립적 운영</strong></p>
<ul>
<li>다른 서비스 DB에 의존하지 않고 <strong>자기 DB에서 바로 조회 가능</strong></li>
<li>서비스 확장, 장애 격리 용이</li>
</ul>
</li>
<li><p><strong>읽기 성능 향상</strong></p>
<ul>
<li>Join, 원격 API 호출 없이 빠르게 데이터 조회</li>
</ul>
</li>
<li><p><strong>이벤트 기반 동기화 용이</strong></p>
<ul>
<li>EDA(Event-Driven Architecture) 활용 → 이벤트를 통해 데이터 업데이트</li>
</ul>
</li>
</ol>
<hr />
<h2 id="3-데이터-복제-단점">3. 데이터 복제 단점</h2>
<ol>
<li><p><strong>데이터 일관성 문제</strong></p>
<ul>
<li>주문 데이터가 여러 DB에 분산 → 갱신 시 동기화 문제 발생</li>
<li>예: 주문 취소 시 Inventory, Notification에 반영이 늦어 오류 발생 가능</li>
</ul>
</li>
<li><p><strong>복잡성 증가</strong></p>
<ul>
<li>이벤트 발행, 동기화 로직, 장애 처리 추가 필요</li>
<li>eventual consistency 관리 필요</li>
</ul>
</li>
</ol>
<hr />
<h2 id="4-일관성과-복제의-균형">4. 일관성과 복제의 균형</h2>
<table>
<thead>
<tr>
<th>전략</th>
<th>특징</th>
<th>예시</th>
</tr>
</thead>
<tbody><tr>
<td>강한 일관성(Strong Consistency)</td>
<td>모든 서비스가 같은 DB 참조, 즉시 동기화</td>
<td>단일 RDB에서 CRUD 처리</td>
</tr>
<tr>
<td>느슨한 일관성(Eventual Consistency)</td>
<td>서비스마다 데이터 복제, 이벤트로 점진적 동기화</td>
<td>OrderService → 주문 생성 이벤트 → InventoryService/NotificationService 업데이트</td>
</tr>
<tr>
<td>읽기 전용 복제</td>
<td>읽기만 필요한 경우, 쓰기는 원본에서만 수행</td>
<td>NotificationService가 주문 내역 조회용으로 복제</td>
</tr>
</tbody></table>
<blockquote>
<p>MSA에서는 대부분 <strong>점진적 일관성(Eventual Consistency)</strong> 전략을 선택</p>
<ul>
<li>읽기 성능과 독립성을 확보하면서</li>
<li>데이터 동기화 이벤트를 통해 일관성 유지</li>
</ul>
</blockquote>
<hr />
<h2 id="5-요약">5. 요약</h2>
<ul>
<li><strong>서비스 간 데이터 중복은 MSA에서 어느 정도 허용</strong>해야 함</li>
<li><strong>읽기 성능 + 서비스 독립성</strong> vs <strong>일관성 유지</strong> 균형이 핵심</li>
<li>이벤트 기반으로 <strong>복제 데이터 동기화</strong>하면 대부분 문제 해결 가능</li>
</ul>
<hr />
<p>💡 <strong>핵심 원칙</strong></p>
<ol>
<li><strong>MSA에서는 데이터 공유보다는 복제 권장</strong></li>
<li><strong>강한 일관성보다 eventual consistency</strong>를 선택</li>
<li><strong>이벤트 발행/구독으로 데이터 동기화</strong></li>
</ol>
<hr />