<p><img alt="" src="https://velog.velcdn.com/images/hello22433/post/76bfafdf-39df-4794-8421-2e920d4c61b6/image.png" /></p>
<p>애플리케이션 개발에서 데이터베이스는 핵심적인 역할을 한다.
특히 Spring + JPA 환경에서는 <strong>관계형 데이터베이스(RDB)</strong>에 대한 이해가 필수다.
이 글에서는 SQL, 트랜잭션, 인덱스, 정규화, 마이그레이션 도구, 테스트 DB까지 실무에서 꼭 알아야 하는 기초 내용을 정리한다.</p>
<hr />
<h1 id="1-관계형-데이터베이스rdb-이해">1. 관계형 데이터베이스(RDB) 이해</h1>
<p>관계형 데이터베이스는 데이터를 <strong>테이블(관계)</strong> 단위로 저장하며, 테이블 간의 관계는 외래키(FK)로 연결된다.</p>
<p>주요 특징:</p>
<ul>
<li>테이블 구조가 명확하다 (스키마 기반)</li>
<li>정규화된 구조로 중복을 최소화한다</li>
<li>SQL을 사용해 데이터 조회/갱신</li>
<li>트랜잭션 관리로 데이터 무결성을 보장</li>
</ul>
<p>대표 DBMS: MySQL, PostgreSQL, Oracle, MariaDB</p>
<hr />
<h1 id="2-sql-기본">2. SQL 기본</h1>
<h3 id="21-ddl-데이터-정의어">2.1 DDL (데이터 정의어)</h3>
<p>테이블 생성/변경/삭제</p>
<pre><code class="language-sql">CREATE TABLE users (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);</code></pre>
<h3 id="22-dml-데이터-조작어">2.2 DML (데이터 조작어)</h3>
<p>데이터 삽입/수정/조회/삭제</p>
<pre><code class="language-sql">SELECT * FROM users WHERE name = 'kim';

INSERT INTO users(name) VALUES ('lee');
UPDATE users SET name = 'park' WHERE id = 1;
DELETE FROM users WHERE id = 3;</code></pre>
<h3 id="23-join">2.3 JOIN</h3>
<p>여러 테이블을 관계를 기반으로 결합</p>
<pre><code class="language-sql">SELECT *
FROM orders o
JOIN users u ON o.user_id = u.id;</code></pre>
<p>JOIN은 DB 성능과 쿼리 품질에서 매우 중요한 개념이다.</p>
<hr />
<h1 id="3-트랜잭션transaction--acid">3. 트랜잭션(Transaction) — ACID</h1>
<p>트랜잭션은 “하나의 논리적 작업 단위”다.
예: 계좌 이체 → 출금 + 입금이 함께 성공하거나 함께 실패해야 한다.</p>
<h3 id="acid-특징">ACID 특징</h3>
<table>
<thead>
<tr>
<th>속성</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>Atomicity</td>
<td>원자성 (모두 성공 or 모두 실패)</td>
</tr>
<tr>
<td>Consistency</td>
<td>일관성 (제약 조건 항상 만족)</td>
</tr>
<tr>
<td>Isolation</td>
<td>격리성 (동시 요청 간 간섭 최소화)</td>
</tr>
<tr>
<td>Durability</td>
<td>영속성 (커밋 후 데이터 보존)</td>
</tr>
</tbody></table>
<p>JPA의 트랜잭션 관리도 결국 이 원칙 위에서 동작한다.</p>
<hr />
<h1 id="4-인덱스index-원리-기초">4. 인덱스(Index) 원리 기초</h1>
<p>인덱스는 책의 “목차”와 같다.
<strong>탐색 속도를 빠르게 하기 위해 특정 컬럼을 정렬된 자료구조(B-tree 등)로 저장한다.</strong></p>
<h3 id="장점">장점</h3>
<ul>
<li>조회 성능 향상 (WHERE, JOIN 조건에 효과적)</li>
</ul>
<h3 id="단점">단점</h3>
<ul>
<li>INSERT/UPDATE 시 인덱스 갱신 필요 → 쓰기 성능 저하</li>
<li>과도한 인덱스는 역효과</li>
</ul>
<h3 id="기본-규칙">기본 규칙</h3>
<ul>
<li>조회 조건에 자주 사용되는 컬럼에 인덱스 생성</li>
<li>카디널리티(값 다양성)가 높은 컬럼이 인덱스에 유리</li>
</ul>
<hr />
<h1 id="5-스키마-설계">5. 스키마 설계</h1>
<h3 id="51-정규화">5.1 정규화</h3>
<p>중복을 줄이고 데이터 무결성 유지
대표 규칙:</p>
<ul>
<li>1NF: 컬럼은 원자값만</li>
<li>2NF: 부분 함수 종속 제거</li>
<li>3NF: 이행적 함수 종속 제거</li>
</ul>
<p>정규화의 핵심은 <strong>중복 제거 → 이상현상 방지</strong>이다.</p>
<h3 id="52-실무적-비정규화">5.2 실무적 비정규화</h3>
<p>정규화를 너무 철저히 하면 JOIN이 많아져 성능이 떨어질 수 있다.
실무에서는 다음과 같은 상황에서 비정규화를 고려한다.</p>
<ul>
<li>조회 속도가 중요하고 읽기 부하가 높을 때</li>
<li>동일한 값을 여러 테이블에 중복 저장해도 무방할 때</li>
<li>통계 데이터처럼 “한 번 기록되고 거의 변경되지 않는 데이터”</li>
</ul>
<p>정규화와 비정규화의 밸런스가 스키마 설계의 핵심이다.</p>
<hr />
<h1 id="6-마이그레이션-도구">6. 마이그레이션 도구</h1>
<p>실무에서 DB 스키마는 계속 변경된다.
그래서 스키마는 <strong>버전 관리</strong>가 필요하다.</p>
<h3 id="61-flyway">6.1 Flyway</h3>
<ul>
<li>SQL 기반</li>
<li>단순하고 배우기 쉬움</li>
<li>버전 관리 파일: <code>V1__init.sql</code>, <code>V2__add_user_table.sql</code></li>
</ul>
<h3 id="62-liquibase">6.2 Liquibase</h3>
<ul>
<li>XML/YAML/JSON 표현 가능</li>
<li>대규모 엔터프라이즈에서 사용</li>
</ul>
<p>공통 특징:</p>
<ul>
<li>스키마 변경을 코드처럼 관리</li>
<li>CI/CD 파이프라인에 통합 가능</li>
</ul>
<hr />
<h1 id="7-테스트용-인메모리-db--h2">7. 테스트용 인메모리 DB — H2</h1>
<p>Spring Boot에서는 테스트 실행 시 H2를 자주 사용한다.</p>
<p>이유:</p>
<ul>
<li>설치 필요 없음</li>
<li>메모리 기반이라 Light하고 빠름</li>
<li>JPA/Hibernate와 궁합이 좋음</li>
</ul>
<h3 id="예시application-testyml">예시(application-test.yml)</h3>
<pre><code class="language-yaml">spring:
  datasource:
    url: jdbc:h2:mem:testdb
    driver-class-name: org.h2.Driver
  jpa:
    hibernate:
      ddl-auto: create
    properties:
      hibernate:
        format_sql: true</code></pre>
<p>테스트용 DB와 운영 DB(MySQL, PostgreSQL)를 분리하면 테스트 신뢰도가 높아진다.</p>
<hr />
<h1 id="마무리">마무리</h1>
<p>Spring/JPA를 사용하기 위해서는 최소한의 데이터베이스 기초가 반드시 필요하다.
관계형 DB 구조, SQL, 트랜잭션, 인덱스, 스키마 설계, 마이그레이션, 그리고 H2까지 이해하면
애플리케이션 개발과 성능 개선까지 훨씬 안정적으로 진행할 수 있다.</p>